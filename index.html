<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SB AI | v0.0.1 (PRE-PRE-PRE-ALPHA)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: 'var(--primary)',
                        'primary-dim': 'var(--primary-dim)',
                        'card-bg': 'rgba(18, 18, 18, var(--bg-opacity))',
                    }
                }
            }
        }
    </script>

    <style>
        :root { 
            --primary: #a855f7; 
            --primary-dim: rgba(168, 85, 247, 0.2); 
            --bg-opacity: 0.95;
            --bg-brightness: 100%;
        }
        
        body { background-color: #050505; color: #e2e8f0; }

        #custom-bg {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            background-size: cover;
            background-position: center;
            filter: brightness(var(--bg-brightness));
        }

        .active-tab-nav { border-bottom: 2px solid var(--primary); color: white !important; }
        .sidebar-active { background: var(--primary-dim); border-left: 4px solid var(--primary); color: white !important; }
        
        .bubble-modern { border-radius: 1.25rem; }
        .bubble-classic { border-radius: 4px; }
        
        .glass { background: rgba(0,0,0,0.6); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.1); }
        
        .alpha-tag {
            background: #ef4444;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
    </style>
</head>
<body class="overflow-hidden fixed inset-0 font-sans">

    <div id="custom-bg"></div>

    <div id="landing-page" class="w-full h-full overflow-y-auto bg-black/80 backdrop-blur-md relative z-50">
        <header class="p-6 flex justify-between items-center max-w-7xl mx-auto">
            <div class="text-2xl font-black italic flex items-center gap-2">
                SB <span class="text-primary">AI</span>
                <span class="alpha-tag">v0.0.1</span>
            </div>
            <button onclick="enterApp()" class="bg-primary text-white px-8 py-2 rounded-full font-bold shadow-lg hover:scale-105 transition">ENTER DEV BUILD</button>
        </header>

        <section class="min-h-screen flex flex-col items-center justify-center text-center px-6">
            <div class="mb-4 inline-block border border-red-500/50 text-red-500 px-4 py-1 rounded-full text-xs font-bold bg-red-500/10">
                PRE-PRE-PRE-ALPHA BUILD
            </div>
            <h1 class="text-6xl md:text-9xl font-black mb-4 italic tracking-tighter uppercase">SB <span class="text-primary">OS</span></h1>
            <p class="text-xl text-gray-400 mb-12">Unstable development environment for testing purposes.</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl w-full">
                <div class="p-8 glass rounded-3xl text-left border-l-4 border-red-500">
                    <h3 class="text-2xl font-bold mb-4 flex items-center gap-2"><i class="fa-solid fa-code text-red-500"></i> About Us</h3>
                    <div class="mb-4">
                        <p class="text-xs text-gray-500 uppercase font-black">Creator</p>
                        <p class="text-lg font-bold">EpicMemazGuy <span class="text-sm font-normal text-gray-400">(Jakub Sobański)</span></p>
                    </div>
                    <div class="mb-4">
                        <p class="text-xs text-gray-500 uppercase font-black">Development Implementation</p>
                        <p class="text-sm text-gray-300 italic">UI and AI Implementation, Google Gemini 3 Fast, Pro and Thinking.</p>
                    </div>
                </div>
                
                <div class="p-8 glass rounded-3xl text-left">
                    <h3 class="text-2xl font-bold mb-4 flex items-center gap-2"><i class="fa-solid fa-bug text-gray-500"></i> Dev Notes</h3>
                    <p class="text-sm text-gray-400 mb-4">This version (0.0.1) includes the first implementation of the Personalization Tab and AI Brain switching logic.</p>
                    <div class="flex gap-2">
                        <span class="bg-white/10 px-2 py-1 rounded text-[10px]">LOCAL_STORAGE_V1</span>
                        <span class="bg-white/10 px-2 py-1 rounded text-[10px]">GALLERY_SYSTEM</span>
                    </div>
                </div>
            </div>
            <p class="mt-20 text-gray-600 text-xs uppercase tracking-widest">Early Access Release • Jakub Sobański © 2026</p>
        </section>
    </div>

    <div id="app-interface" class="hidden absolute inset-0 z-[40] flex flex-col md:flex-row">
        
        <nav class="md:w-64 md:h-full glass md:bg-black/60 fixed bottom-0 w-full h-16 md:static z-30 flex flex-row md:flex-col items-center md:items-stretch md:p-2">
            <div class="p-4 text-xl font-black hidden md:block border-b border-white/5 mb-4">SB <span class="text-primary">OS</span> <span class="text-[8px] text-red-500 align-top">0.0.1</span></div>
            
            <button onclick="switchSection('chat')" id="btn-chat" class="flex-1 md:flex-none p-2 md:p-3 rounded-xl flex flex-col md:flex-row items-center md:space-x-3 text-gray-400 transition sidebar-active">
                <i class="fa-solid fa-message"></i> <span class="text-[9px] md:text-xs font-bold uppercase">Chat</span>
            </button>
            <button onclick="switchSection('image')" id="btn-image" class="flex-1 md:flex-none p-2 md:p-3 rounded-xl flex flex-col md:flex-row items-center md:space-x-3 text-gray-400 transition">
                <i class="fa-solid fa-image"></i> <span class="text-[9px] md:text-xs font-bold uppercase">Art</span>
            </button>
            <button onclick="switchSection('gallery')" id="btn-gallery" class="flex-1 md:flex-none p-2 md:p-3 rounded-xl flex flex-col md:flex-row items-center md:space-x-3 text-gray-400 transition">
                <i class="fa-solid fa-layer-group"></i> <span class="text-[9px] md:text-xs font-bold uppercase">Gallery</span>
            </button>

            <a href="https://suno.com" target="_blank" class="flex-1 md:flex-none p-2 md:p-3 rounded-xl flex flex-col md:flex-row items-center md:space-x-3 text-yellow-500 border border-yellow-500/20 md:mt-4 hover:bg-yellow-500 hover:text-black transition">
                <i class="fa-solid fa-music"></i> <span class="text-[9px] md:text-xs font-bold uppercase tracking-tighter">Suno™</span>
            </a>
            
            <button onclick="openSettings()" class="hidden md:flex mt-auto p-4 text-gray-500 hover:text-white items-center space-x-3">
                <i class="fa-solid fa-gear"></i> <span class="text-xs font-bold">Settings</span>
            </button>
        </nav>

        <main class="flex-1 relative overflow-hidden flex flex-col mb-16 md:mb-0">
            <div class="md:hidden flex items-center justify-between p-4 glass h-14">
                <span class="font-black italic">SB <span class="text-primary">AI</span> <span class="text-[10px] text-red-500">0.0.1</span></span>
                <button onclick="openSettings()"><i class="fa-solid fa-gear text-lg"></i></button>
            </div>

            <div id="section-chat" class="h-full flex flex-col">
                <div id="chat-box" class="flex-1 overflow-y-auto p-4 space-y-4 pb-32"></div>
                <div class="p-4 absolute bottom-0 w-full bg-gradient-to-t from-black via-black/90 to-transparent">
                    <div class="max-w-4xl mx-auto flex gap-2">
                        <input type="text" id="chat-input" placeholder="Prompt v0.0.1 build..." class="flex-1 glass rounded-2xl px-6 py-4 outline-none focus:border-primary text-sm shadow-2xl">
                        <button onclick="sendMessage()" class="w-14 h-14 bg-primary text-white rounded-2xl flex items-center justify-center shadow-lg"><i class="fa-solid fa-paper-plane"></i></button>
                    </div>
                </div>
            </div>

            <div id="section-image" class="hidden h-full p-8 flex flex-col items-center">
                <div class="w-full max-w-xl glass p-6 rounded-3xl text-center">
                    <h2 class="text-xl font-bold mb-4 uppercase tracking-widest">Image <span class="text-primary">Alpha</span></h2>
                    <input type="text" id="img-prompt" placeholder="Describe vision..." class="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 mb-4">
                    <button onclick="genImage()" class="w-full bg-primary py-3 rounded-xl font-bold">RENDER</button>
                    <img id="img-result" class="mt-6 w-full rounded-xl hidden border border-white/10">
                </div>
            </div>

            <div id="section-gallery" class="hidden h-full p-8 overflow-y-auto">
                <h2 class="text-2xl font-black mb-6 italic uppercase tracking-tighter">Render <span class="text-primary">History</span></h2>
                <div id="gallery-grid" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
            </div>
        </main>
    </div>

    <div id="settings-modal" class="hidden fixed inset-0 z-[100] bg-black/90 flex items-center justify-center p-4">
        <div class="bg-[#121212] border border-white/10 w-full max-w-2xl h-[80vh] rounded-3xl flex flex-col overflow-hidden shadow-2xl">
            <div class="p-4 border-b border-white/5 flex justify-between items-center bg-black/40">
                <h3 class="font-bold flex items-center gap-2"><i class="fa-solid fa-sliders text-primary"></i> v0.0.1 Config</h3>
                <button onclick="closeSettings()" class="text-gray-500 hover:text-white"><i class="fa-solid fa-xmark text-xl"></i></button>
            </div>

            <div class="flex border-b border-white/5 bg-black/20 text-xs font-bold uppercase tracking-wider overflow-x-auto">
                <button onclick="setSetTab('pref')" id="set-tab-pref" class="px-6 py-4 text-gray-500 active-tab-nav">Preferences</button>
                <button onclick="setSetTab('brain')" id="set-tab-brain" class="px-6 py-4 text-gray-500">AI Brain</button>
                <button onclick="setSetTab('pers')" id="set-tab-pers" class="px-6 py-4 text-gray-500">Personalization</button>
            </div>

            <div class="flex-1 overflow-y-auto p-6 space-y-8">
                <div id="set-content-pref" class="space-y-6">
                    <div>
                        <label class="text-xs text-gray-500 uppercase block mb-2 font-black">User Name</label>
                        <input type="text" id="pref-name" class="w-full bg-white/5 border border-white/10 rounded-xl p-3 outline-none focus:border-primary">
                    </div>
                    <div>
                        <label class="text-xs text-gray-500 uppercase block mb-2 font-black">User Likes</label>
                        <textarea id="pref-likes" class="w-full bg-white/5 border border-white/10 rounded-xl p-3 outline-none focus:border-primary h-24"></textarea>
                    </div>
                </div>

                <div id="set-content-brain" class="hidden space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="text-xs text-gray-500 uppercase block mb-2 font-black">What AI to use?</label>
                            <select id="brain-chat" class="w-full bg-white/5 border border-white/10 rounded-xl p-3 outline-none">
                                <option value="gemini-3-fast">Gemini 3 Fast</option>
                                <option value="gemini-3-pro">Gemini 3 Pro</option>
                                <option value="gemini-3-thinking">Gemini 3 Thinking</option>
                            </select>
                        </div>
                        <div>
                            <label class="text-xs text-gray-500 uppercase block mb-2 font-black">API Key (DEV_ONLY)</label>
                            <input type="password" id="brain-key" placeholder="••••••••" class="w-full bg-white/5 border border-white/10 rounded-xl p-3 outline-none">
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="text-xs text-gray-500 uppercase block mb-2 font-black">Image AI</label>
                            <select id="brain-img-gen" class="w-full bg-white/5 border border-white/10 rounded-xl p-3 outline-none">
                                <option value="flux">Flux.1 Neural</option>
                                <option value="stable">Stable Diffusion XL</option>
                            </select>
                        </div>
                        <div>
                            <label class="text-xs text-gray-500 uppercase block mb-2 font-black">Video AI</label>
                            <select id="brain-vid-gen" class="w-full bg-white/5 border border-white/10 rounded-xl p-3 outline-none">
                                <option value="luma">Luma Dream Machine</option>
                                <option value="kling">Kling AI</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label class="flex items-center gap-2 text-xs text-gray-500 uppercase font-black mb-2">
                            <input type="checkbox" id="brain-override" class="accent-primary"> Override AI Voice/Tone
                        </label>
                        <textarea id="brain-tone" placeholder="How should the AI talk?" class="w-full bg-white/5 border border-white/10 rounded-xl p-3 outline-none h-20"></textarea>
                    </div>
                </div>

                <div id="set-content-pers" class="hidden space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="text-xs text-gray-500 uppercase block mb-2 font-black">Accent Color</label>
                            <input type="color" id="pers-accent" class="w-full h-12 bg-transparent border-none cursor-pointer">
                        </div>
                        <div>
                            <label class="text-xs text-gray-500 uppercase block mb-2 font-black">Bubble Style</label>
                            <select id="pers-bubble" class="w-full bg-white/5 border border-white/10 rounded-xl p-3 outline-none">
                                <option value="modern">Modern</option>
                                <option value="classic">Classic</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label class="text-xs text-gray-500 uppercase block mb-2 font-black">Background Image URL</label>
                        <input type="text" id="pers-bg-url" class="w-full bg-white/5 border border-white/10 rounded-xl p-3 outline-none">
                    </div>
                    <div>
                        <label class="text-xs text-gray-500 uppercase block mb-2 font-black">Background Brightness</label>
                        <input type="range" id="pers-bg-bright" min="0" max="100" class="w-full accent-primary">
                    </div>
                </div>
            </div>

            <div class="p-6 border-t border-white/5 bg-black/40 flex gap-3">
                <button onclick="saveSettings()" class="flex-1 bg-primary text-white py-3 rounded-xl font-bold">COMMIT CHANGES</button>
            </div>
        </div>
    </div>

    <script>
        let config = JSON.parse(localStorage.getItem('sb_alpha_config')) || {
            user: { name: 'Jakub', likes: 'Coding, Memes, and Dev-talk' },
            brain: { chat: 'gemini-3-pro', key: '', override: false, tone: '', imgGen: 'flux', vidGen: 'luma' },
            pers: { accent: '#a855f7', bubble: 'modern', bgUrl: '', bgBright: 50 },
            history: [],
            gallery: []
        };

        function enterApp() {
            document.getElementById('landing-page').classList.add('hidden');
            document.getElementById('app-interface').classList.remove('hidden');
            applyConfig();
            renderChat();
            renderGallery();
        }

        function switchSection(s) {
            ['chat', 'image', 'gallery'].forEach(id => {
                document.getElementById('section-'+id).classList.add('hidden');
                document.getElementById('btn-'+id).classList.remove('sidebar-active');
            });
            document.getElementById('section-'+s).classList.remove('hidden');
            document.getElementById('btn-'+s).classList.add('sidebar-active');
        }

        function openSettings() {
            document.getElementById('settings-modal').classList.remove('hidden');
            document.getElementById('pref-name').value = config.user.name;
            document.getElementById('pref-likes').value = config.user.likes;
            document.getElementById('brain-chat').value = config.brain.chat;
            document.getElementById('brain-key').value = config.brain.key;
            document.getElementById('brain-img-gen').value = config.brain.imgGen || 'flux';
            document.getElementById('brain-vid-gen').value = config.brain.vidGen || 'luma';
            document.getElementById('brain-override').checked = config.brain.override;
            document.getElementById('brain-tone').value = config.brain.tone;
            document.getElementById('pers-accent').value = config.pers.accent;
            document.getElementById('pers-bubble').value = config.pers.bubble;
            document.getElementById('pers-bg-url').value = config.pers.bgUrl;
            document.getElementById('pers-bg-bright').value = config.pers.bgBright;
        }

        function closeSettings() { document.getElementById('settings-modal').classList.add('hidden'); }

        function setSetTab(t) {
            ['pref', 'brain', 'pers'].forEach(id => {
                document.getElementById('set-content-'+id).classList.add('hidden');
                document.getElementById('set-tab-'+id).classList.remove('active-tab-nav');
            });
            document.getElementById('set-content-'+t).classList.remove('hidden');
            document.getElementById('set-tab-'+t).classList.add('active-tab-nav');
        }

        function saveSettings() {
            config.user.name = document.getElementById('pref-name').value;
            config.user.likes = document.getElementById('pref-likes').value;
            config.brain.chat = document.getElementById('brain-chat').value;
            config.brain.key = document.getElementById('brain-key').value;
            config.brain.imgGen = document.getElementById('brain-img-gen').value;
            config.brain.vidGen = document.getElementById('brain-vid-gen').value;
            config.brain.override = document.getElementById('brain-override').checked;
            config.brain.tone = document.getElementById('brain-tone').value;
            config.pers.accent = document.getElementById('pers-accent').value;
            config.pers.bubble = document.getElementById('pers-bubble').value;
            config.pers.bgUrl = document.getElementById('pers-bg-url').value;
            config.pers.bgBright = document.getElementById('pers-bg-bright').value;

            localStorage.setItem('sb_alpha_config', JSON.stringify(config));
            applyConfig();
            closeSettings();
        }

        function applyConfig() {
            const root = document.documentElement;
            root.style.setProperty('--primary', config.pers.accent);
            root.style.setProperty('--primary-dim', config.pers.accent + '33');
            root.style.setProperty('--bg-brightness', config.pers.bgBright + '%');
            const bg = document.getElementById('custom-bg');
            bg.style.backgroundImage = config.pers.bgUrl ? `url('${config.pers.bgUrl}')` : 'none';
        }

        async function sendMessage() {
            const input = document.getElementById('chat-input');
            const val = input.value.trim();
            if(!val) return;
            appendMessage('User', val);
            input.value = '';
            
            let system = `Dev Mode v0.0.1. User: ${config.user.name}. Preferences: ${config.user.likes}.`;
            if(config.brain.override) system += ` Tone: ${config.brain.tone}`;

            let context = `System: ${system}\n`;
            config.history.slice(-5).forEach(m => context += `${m.role}: ${m.content}\n`);
            context += `User: ${val}\nAI:`;

            try {
                const res = await fetch('https://text.pollinations.ai/' + encodeURIComponent(context));
                const text = await res.text();
                appendMessage('AI', text);
                config.history.push({role:'User', content:val}, {role:'AI', content:text});
                localStorage.setItem('sb_alpha_config', JSON.stringify(config));
            } catch(e) { console.error(e); }
        }

        function appendMessage(role, text) {
            const box = document.getElementById('chat-box');
            const isUser = role === 'User';
            const bubbleStyle = config.pers.bubble === 'modern' ? 'bubble-modern' : 'bubble-classic';
            const html = `<div class="flex ${isUser ? 'justify-end' : 'justify-start'} mb-4">
                <div class="${isUser ? 'bg-white/10' : 'bg-primary-dim border border-primary/20'} p-4 ${bubbleStyle} max-w-[85%] text-sm prose prose-invert shadow-2xl">
                    ${isUser ? text : marked.parse(text)}
                </div>
            </div>`;
            box.insertAdjacentHTML('beforeend', html);
            box.scrollTop = box.scrollHeight;
        }

        function renderChat() {
            const box = document.getElementById('chat-box');
            box.innerHTML = '';
            config.history.forEach(m => appendMessage(m.role, m.content));
        }

        function genImage() {
            const p = document.getElementById('img-prompt').value;
            const res = document.getElementById('img-result');
            if(!p) return;
            const url = `https://image.pollinations.ai/prompt/${encodeURIComponent(p)}?nologo=true&seed=${Math.random()}`;
            res.classList.remove('hidden');
            res.src = url;
            
            // Save to Gallery
            if(!config.gallery) config.gallery = [];
            config.gallery.unshift(url);
            localStorage.setItem('sb_alpha_config', JSON.stringify(config));
            renderGallery();
        }

        function renderGallery() {
            const grid = document.getElementById('gallery-grid');
            if(!grid) return;
            grid.innerHTML = (config.gallery || []).map(src => `
                <div class="aspect-square glass rounded-xl overflow-hidden hover:scale-105 transition cursor-pointer">
                    <img src="${src}" class="w-full h-full object-cover">
                </div>
            `).join('');
        }
    </script>
</body>
</html>
